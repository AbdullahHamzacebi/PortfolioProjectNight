
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Admin/Index.cshtml";
}

<h2 class="mb-4">İstatistikler</h2>

<div class="alert alert-success">Toplam Mesaj Sayısı: <b>@ViewBag.totalMessageCount</b></div>
<div class="alert alert-danger">Okunmuş Mesaj Sayısı: <b>@ViewBag.messageIsReadTrueCount</b></div>
<div class="alert alert-danger">Okunmamış Mesaj Sayısı: <b>@ViewBag.messageIsReadFalseCount</b></div>
<div class="alert alert-dark">Yetenek Sayısı: <b>@ViewBag.skillCount</b></div>
<div class="alert alert-info">Yeteneklerin Toplam Puanı: <b>@ViewBag.skillRateSum</b></div>
<div class="alert alert-primary">Yeteneklerin Ortalama Puanı: <b>@ViewBag.skillRateAvg</b></div>
<div class="alert alert-primary" style="background-color:orangered">En Yüksek Puanlı Yetenek:<b>@ViewBag.maxRateSkillName</b></div>
<div class="alert alert-primary" style="background-color:gray">Referans Konulu Mesaj Sayısı:<b>@ViewBag.getMessageCountBySubjectReferances</b></div>
<div class="alert alert-primary" style="background-color:green">İçinde H Harfi Geçen Okunmuş Mesaj Sayısı:<b>@ViewBag.getMessageCountByEmailContainHAndIsreadTrue</b></div>
<div class="alert alert-primary" style="background-color:yellow">Değeri 90 Olan Yetenek İsmi:<b>@ViewBag.getSkillNameByRate90</b></div>


 



@*
    SkillId   SkillName             Rate

    1	        C# 	                 99
    2	        SQL         	     95
    3	        Python	             70
    4	        Asp.Net Mvc       	 96
    5	        Asp.Net Core	     90
    7	        Tasarım Desenleri	 75
    8	        Test	             12

    Burdaki kısımda istediğimiz şey Sql' deki kodlaması;
    Rate'i en yüksek olan kısmı bulmaya çalışıyoruz.

    -- Select top 1 * From Skill order By Rate desc
    -- Select * From Skill Where Rate= (Select Max(Rate) From Skill)

    2 si de doğru
    Bunu Controller kısmında uygulayacaz.

     ViewBag.maxRateSkillName = context.Skill.Where(x => x.Rate == maxRate).Select(y=>y.SkillName).FirstOrDefault();

    Komple satırı getirir. Tek değer getirmek istediğimizde FirstOrDefault()'u kullanırız.

    Query = parametre anlamında.
    mesela booking?adultCount  
    ordaki ? işaretinin anlamı Query = parametre bekliyor anlamında.

*@